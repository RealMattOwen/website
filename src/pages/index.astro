---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import WhosBehind from "../components/WhosBehind.astro";
import Connect from "../components/Connect.astro";
import Events from "../components/Events.astro";

const eventsAll = await getCollection("events");
const eventRecent = eventsAll.at(-1);
const eventRecentIsUpcoming =
  eventRecent && new Date().getTime() < eventRecent.data.dateStart.getTime();
const heroButtonProps = eventRecentIsUpcoming
  ? {
      buttonText: "Check upcoming event",
      buttonUrl: `/events/${eventRecent.id}`,
    }
  : {};
---

<Layout
  title="NN1 Dev Club"
  description="Whether you're a seasoned pro or just starting out, there's something for everyone at Northamptonshire Dev Club. Connect with like-minded individuals, expand your skillset, and have a great time doing what you love."
>
  <Hero
    title="NN1 Dev Club"
    description="Whether you're a seasoned pro or just starting out, there's something for everyone at Northamptonshire Dev Club. Connect with like-minded individuals, expand your skillset, and have a great time doing what you love."
    {...heroButtonProps}
  />
  <Events />
  <WhosBehind />
  <Connect />
</Layout>
